<!DOCTYPE html>
<html>

  <head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">

  <title>

    
      Cloud9 with Laravel 5.3
    

  </title>

  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="想從 Cloud9 來試試 Laravel5.3 新功能，跑一下 php -v 發現官方預設 PHP 的 Docker Image 環境版本是 5.5.9 PHP 5.5.9-1ubuntu4.19 (cli) (built: Jul 28 2016 19:31:33)  Copyright (c) 1997-2014 The PHP Group Zend Engine v2.5.0, Copyr">
<meta name="keywords" content="php,laravel,cloud9">
<meta property="og:type" content="article">
<meta property="og:title" content="Cloud9 with Laravel 5.3">
<meta property="og:url" content="http://blog.liaosankai.com/2016/09/05/Cloud9 with Laravel 5.3/index.html">
<meta property="og:site_name" content="SanKai&#39;s Blog">
<meta property="og:description" content="想從 Cloud9 來試試 Laravel5.3 新功能，跑一下 php -v 發現官方預設 PHP 的 Docker Image 環境版本是 5.5.9 PHP 5.5.9-1ubuntu4.19 (cli) (built: Jul 28 2016 19:31:33)  Copyright (c) 1997-2014 The PHP Group Zend Engine v2.5.0, Copyr">
<meta property="og:locale" content="zh-tw">
<meta property="og:updated_time" content="2019-01-08T07:36:18.729Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Cloud9 with Laravel 5.3">
<meta name="twitter:description" content="想從 Cloud9 來試試 Laravel5.3 新功能，跑一下 php -v 發現官方預設 PHP 的 Docker Image 環境版本是 5.5.9 PHP 5.5.9-1ubuntu4.19 (cli) (built: Jul 28 2016 19:31:33)  Copyright (c) 1997-2014 The PHP Group Zend Engine v2.5.0, Copyr">

  

  
    <link rel="icon" href="/favicon.png">
  

  <link href="/webfonts/ptserif/main.css" rel="stylesheet" type="text/css">
  <link href="/webfonts/source-code-pro/main.css" rel="stylesheet" type="text/css">

  <link rel="stylesheet" href="/css/style.css">
  
  <!-- Google Analytics -->
  <script type="text/javascript">
    (function (i, s, o, g, r, a, m) {
      i['GoogleAnalyticsObject'] = r;
      i[r] = i[r] || function () {
        (i[r].q = i[r].q || []).push(arguments)
      },
      i[r].l = 1 * new Date();
      a = s.createElement(o),
      m = s.getElementsByTagName(o)[0];
      a.async = 1;
      a.src = g;
      m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-19121990-2', 'auto');
    ga('send', 'pageview');
  </script>
  <!-- End Google Analytics -->



</head>


  <body>

    <div id="container">

      <header id="header">
  <div id="header-outer" class="outer">
    <div id="header-inner" class="inner">
      <a id="main-nav-toggle" class="nav-icon" href="javascript:;"></a>
      
      
        <a id="logo" class="logo-text" href="/">
        三凱筆記
        </a>
      
      
      <nav id="main-nav">
        
          <a class="main-nav-link" href="/archives">
            封存 
          </a>
        
          <a class="main-nav-link" href="/categories">
            分類 
          </a>
        
          <a class="main-nav-link" href="/tags">
            標籤 
          </a>
        
          <a class="main-nav-link" href="/about">
            關於 
          </a>
        
      </nav>
      <nav id="sub-nav">
        <div id="search-form-wrap">
          <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://blog.liaosankai.com"></form>
        </div>
      </nav>
    </div>
  </div>
</header>


      <section id="main" class="outer">
        
  <article id="post-Cloud9 with Laravel 5.3" class="article article-type-post" itemscope="" itemprop="blogPost">
  <div class="article-inner">

    


    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Cloud9 with Laravel 5.3
    </h1>
  


      </header>
    

    <div class="article-meta">
      <a href="/2016/09/05/Cloud9 with Laravel 5.3/" class="article-date %>">
  <time datetime="2016-09-04T16:00:00.000Z" itemprop="datePublished">
    2016-09-05
  </time>
</a>

      
  <div class="article-category">
    <a class="article-category-link" href="/categories/程式/">程式</a>
  </div>



      
        <div class="article-comment-link-wrap">
          <a href="http://blog.liaosankai.com/2016/09/05/Cloud9 with Laravel 5.3/#disqus_thread" class="article-comment-link">
            評論
          </a>
        </div>
      

    </div>
    <div class="article-entry" itemprop="articleBody">
      
        <p>想從 <a href="https://c9.io/" target="_blank" rel="noopener">Cloud9</a> 來試試 Laravel5.3 新功能，跑一下 <code>php -v</code> 發現官方預設 PHP 的 Docker Image 環境版本是 5.5.9</p>
<pre><code>PHP 5.5.9-1ubuntu4.19 (cli) (built: Jul 28 2016 19:31:33) 
Copyright (c) 1997-2014 The PHP Group
Zend Engine v2.5.0, Copyright (c) 1998-2014 Zend Technologies
    with Zend OPcache v7.0.3, Copyright (c) 1999-2014, by Zend Technologies
    with Xdebug v2.4.1, Copyright (c) 2002-2016, by Derick Rethans
</code></pre><p>這不符合 <a href="https://laravel.com/docs/5.3/installation#installation" target="_blank" rel="noopener">Laravel5.3 的最低要求</a>，所以首要工作是將 PHP 進行升級。而且既然要升級，就一口氣將它升級到 7 以上吧！</p>
<a id="more"></a>
<h3 id="安裝-PHP-7"><a href="#安裝-PHP-7" class="headerlink" title="安裝 PHP 7"></a>安裝 PHP 7</h3><p>從網路上找到文章提到<a href="https://community.c9.io/t/how-to-upgrade-to-php7/1379" target="_blank" rel="noopener">使用 phpbrew 來進行升級</a>，雖然依照操作成功了升級至 PHP 7 版本，但<a href="http://stackoverflow.com/questions/33775897/install-ext-curl-extension-with-php-7" target="_blank" rel="noopener">其中的 curl extension 發生問題</a>，即便解決了 php-curl 安裝問題，重設了 php.ini，執行 <code>php -m | grep -i curl</code> 還是一樣沒有 curl 模組。搞了半天還是不行，所以放棄這個方式。(如果有人使用 phpbrew 方式並解決 curl 的問題，請指點我一下，感謝)，所以改用<a href="http://stackoverflow.com/questions/34902036/getting-cloud9-ubuntu-14-04-running-with-php-7-0-and-phpmyadmin/34907688#34907688" target="_blank" rel="noopener">直接升級 PHP7 的方式</a>，具體執行命令大概說明如下：</p>
<p>更新資源庫</p>
<pre><code>sudo add-apt-repository ppa:ondrej/php
sudo apt-get update
</code></pre><p>清理舊版本套件</p>
<pre><code>sudo apt-get -y purge php5 libapache2-mod-php5 php5 php5-cli php5-common php5-curl php5-gd php5-imap php5-intl php5-json php5-mcrypt php5-mysql php5-pspell php5-readline php5-sqlite
sudo apt-get autoremove
</code></pre><p>安裝 php7 以及 curl 以及 laravel 可能會需要到的套件</p>
<pre><code>sudo apt-get install php7.0
sudo apt-get install php-curl
sudo apt-get install php-mbstring
sudo apt-get install php-sqlite3
</code></pre><p>安裝 mysql 部分</p>
<pre><code>sudo apt-get install php7.0-mysql
</code></pre><h3 id="建立-Laravel-5-3-專案與重設-DocumentRoot"><a href="#建立-Laravel-5-3-專案與重設-DocumentRoot" class="headerlink" title="建立 Laravel 5.3 專案與重設 DocumentRoot"></a>建立 Laravel 5.3 專案與重設 DocumentRoot</h3><p>接著參考文件 <a href="https://community.c9.io/t/getting-started-with-laravel/1608" target="_blank" rel="noopener">Getting Started with Laravel</a> 步驟說明如下：</p>
<p>刪除 cloud9 預設的檔案，並更新 composer 後建立 laravel 專案</p>
<pre><code>rm README.md php.ini hello-world.php
sudo composer self-update
sudo chown -R $USER $HOME/.composer
composer create-project --prefer-dist laravel/laravel
</code></pre><p>顯示 laravel 專案中隱藏檔並將內容移至 cloud9 的根目錄後刪除</p>
<pre><code>shopt -s dotglob
mv laravel/* ./
rm -rf laravel
</code></pre><p>編輯設定 DocumentRoot (文件中使用 nano，我改用略懂略懂的 vi)</p>
<pre><code>sudo vi /etc/apache2/sites-enabled/001-cloud9.conf

// 搜尋該行字串
DocumentRoot /home/ubuntu/workspace

// 改成下面這樣
DocumentRoot /home/ubuntu/workspace/public
</code></pre><h3 id="更新-node-js"><a href="#更新-node-js" class="headerlink" title="更新 node.js"></a>更新 node.js</h3><p>laravel 5.3 一些新功能，像是 <a href="https://github.com/tlaverdure/laravel-echo-server" target="_blank" rel="noopener">laravel-echo 要求 node.js 為 5.0 以上</a>，以及大部分官方 js 都改用了 es6 的寫法，這部分 c9 預設安裝 nvm ，升級就變的相當容易</p>
<pre><code>nvm install node
</code></pre><p>這樣就能升級到最新版本 6.x 以上，再來安裝 laravel 中 package.json 所需的套件</p>
<pre><code>npm install 
</code></pre><h3 id="啟動-mysql"><a href="#啟動-mysql" class="headerlink" title="啟動 mysql"></a>啟動 mysql</h3><p>透過 mysql-ctl 啟動</p>
<pre><code>mysql-ctl start
</code></pre><p>如果是第一次執行會得到下列訊息(<strong>c9 預設密碼是空字串</strong>)</p>
<pre><code>Installing MySQL
* Stopping MySQL database server mysqld
  ...done.
* Starting MySQL database server mysqld
  ...done.
* Checking for tables which need an upgrade, are corrupt or were 
not closed cleanly.

MySQL 5.5 database added.  Please make note of these credentials:

      Root User: liaosankai
  Database Name: c9    
</code></pre><p>如果想修改密碼，可以透過下面方式修改</p>
<pre><code>mysql-ctl cli
mysql&gt; SET PASSWORD FOR &apos;liaosankai&apos;@&apos;%&apos; = PASSWORD(&apos;my_new_password&apos;); 
</code></pre><p>最後我是使用 <a href="https://www.adminer.org/" target="_blank" rel="noopener">adminer.php</a> 來代替原先 phpmyadmin 工具</p>
<pre><code>sudo wget &quot;http://www.adminer.org/latest.php&quot; -O public/adminer.php
</code></pre><h3 id="啟動-redis"><a href="#啟動-redis" class="headerlink" title="啟動 redis"></a>啟動 redis</h3><p>如果需要使用 redis 的話，可以透過 <code>sudo service redis-server start</code> 啟動，詳細可參考 <a href="https://community.c9.io/t/setting-up-redis/1719" target="_blank" rel="noopener">Setting Up Redis</a>。</p>

      

    </div>

    
      
        <div id="toc-div" class="article-toc">
          <h3>目錄 </h3>
          <div><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#安裝-PHP-7"><span class="toc-number">1.</span> <span class="toc-text">安裝 PHP 7</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#建立-Laravel-5-3-專案與重設-DocumentRoot"><span class="toc-number">2.</span> <span class="toc-text">建立 Laravel 5.3 專案與重設 DocumentRoot</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#更新-node-js"><span class="toc-number">3.</span> <span class="toc-text">更新 node.js</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#啟動-mysql"><span class="toc-number">4.</span> <span class="toc-text">啟動 mysql</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#啟動-redis"><span class="toc-number">5.</span> <span class="toc-text">啟動 redis</span></a></li></ol></div>
        </div>
      

    
      <footer class="article-footer">
        
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/cloud9/">cloud9</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/laravel/">laravel</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/php/">php</a></li></ul>


      </footer>
    
  </div>
  
    
  <nav id="article-nav">
    
      <a href="/2016/09/06/Laravel Echo 概述篇/" id="article-nav-newer" class="article-nav-link-wrap">
        <div class="article-nav-title">
          <span>&lt;</span>&nbsp;
          
            Laravel Echo 概述篇
          
        </div>
      </a>
    

    
      <a href="/2016/06/24/初探 total.js/" id="article-nav-older" class="article-nav-link-wrap">
        <div class="article-nav-title">
          初探 total.js
          &nbsp;<span>&gt;</span>
        </div>
      </a>
    

  </nav>


  
</article>


  <section id="comments">
    <div id="disqus_thread">
      <noscript>Please enable JavaScript to view the
        <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a>
      </noscript>
    </div>
  </section>




      </section>

      <footer id="footer">
  

  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Liao San Kai &nbsp;
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>,
      theme by <a href="http://github.com/ppoffice">PPOffice</a>
    </div>
  </div>
</footer>


      
  <script>
    var disqus_shortname = 'liaosankai';

    
      var disqus_url = 'http://blog.liaosankai.com/2016/09/05/Cloud9 with Laravel 5.3/';
    

    
      var js = 'embed.js';
    

    (function () {
      var d = document;
      var s = d.createElement('script');
      s.type = 'text/javascript';
      s.async = true;
      s.src = '//' + disqus_shortname + '.disqus.com/' + js;
      s.setAttribute('data-timestamp', + new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>


<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>



<script src="https://unpkg.com/mermaid@7.1.2/dist/mermaid.min.js"></script>
<script>
    if (window.mermaid) {
      mermaid.initialize({theme: 'forest'});
    }
</script>


<script src="/js/script.js"></script>

    </div>

    <div id="go-top" style="padding:1em;border:1px solid #CCC;position:fixed;bottom:100px;right:50px;cursor: pointer;">
    <a title="Go Top">
        Go Top
    </a>
</div>

<script>
(function($) {
	// When to show the scroll link
	// higher number = scroll link appears further down the page
	let upperLimit = 150;

	// Our scroll link element
	let scrollElem = $('#go-top');

	// Scroll to top speed
	let scrollSpeed = 500;

	// Show and hide the scroll to top link based on scroll position
	scrollElem.hide();
	$(window).scroll(function () {
		let scrollTop = $(document).scrollTop();
		if ( scrollTop > upperLimit ) {
			$(scrollElem).stop().fadeTo(300, 1); // fade back in
		}else{
			$(scrollElem).stop().fadeTo(300, 0); // fade out
		}
	});
	// Scroll to top animation on click
	$(scrollElem).click(function(){
		$('html, body').animate({scrollTop:0}, scrollSpeed); return false;
	});
})(jQuery);
</script>
  </body>

</html>
